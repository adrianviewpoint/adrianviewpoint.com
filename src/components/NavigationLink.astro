---
interface Props {
  link: {
    label: string;
    href: string;
    external?: boolean;
  };
  currentPath: string;
  variant: 'desktop' | 'mobile';
}

const { link, currentPath, variant } = Astro.props;

const variantClasses = {
  desktop: 'text-sm hover:underline',
  mobile: 'block py-2 px-4 rounded hover:bg-accent'
};

// Check if current path matches the link exactly or is a sub-page of it
const isActive = currentPath === link.href || 
  (link.href !== '/' && currentPath.startsWith(link.href + '/'));

const baseClass = variantClasses[variant];
const activeClass = isActive ? 'font-bold text-primary underline' : '';
---

<a
  href={link.href}
  target={link.external ? '_blank' : undefined}
  rel={link.external ? 'noopener noreferrer' : undefined}
  class={`${baseClass} ${activeClass}`.trim()}
>
  {link.label}
</a>