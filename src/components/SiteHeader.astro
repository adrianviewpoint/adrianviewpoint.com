---
import ThemeToggle from './ThemeToggle.astro';
import HamburgerMenu from './HamburgerMenu.astro';
import NavigationLink from './NavigationLink.astro';

interface Props {
  brand?: string;
  class?: string; // Extra classes appended to header wrapper
  links?: Array<{
    label: string;
    href: string;
    external?: boolean;
  }>;
}

const { brand = 'Adrian Viewpoint', class: extraClass = '', links = [] } = Astro.props;
const currentPath = Astro.url.pathname;
---

<header class={`sticky top-0 z-50 border-b border-border bg-background/80 backdrop-blur-sm ${extraClass}`.trim()}>
  <!-- Skip to content link for screen readers for accessibility purposes -->
  <a href="#main" aria-label="Skip to main content" class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-background border px-2 py-1 rounded shadow z-60">Skip to content</a>
  <nav aria-label="Main navigation" class="container mx-auto px-4 py-4">
    <div class="flex justify-between items-center">
      <a href="/" class="text-xl font-bold text-primary hover:opacity-80 transition-opacity">
        {brand}
      </a>
      <div class="flex items-center space-x-2">
        {links.length > 0 && (
          <ul class="hidden md:flex items-center space-x-4 mr-2">
            {links.map((link) => (
              <li>
                <NavigationLink link={link} currentPath={currentPath} variant="desktop" />
              </li>
            ))}
          </ul>
        )}
        <ThemeToggle />
        {links.length > 0 && (
            <HamburgerMenu />
        )}
      </div>
    </div>
    {links.length > 0 && (
      <div id="mobile-menu" class="hidden mt-4 md:hidden">
        <ul class="flex flex-col space-y-2">
          {links.map((link) => (
            <li>
              <NavigationLink link={link} currentPath={currentPath} variant="mobile" />
            </li>
          ))}
        </ul>
      </div>
    )}
  </nav>
</header>



<script>
  const hamburgerMenu = document.querySelector('.hamburger-menu') as HTMLElement;
  const menu = document.getElementById('mobile-menu') as HTMLDivElement;
  if (hamburgerMenu && menu) {
    hamburgerMenu.addEventListener('toggle', () => {
      menu.classList.toggle('hidden');
    });
  }
</script>
