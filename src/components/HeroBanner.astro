---
import Button from './Button.astro';

interface Props {
  title: string;
  description: string;
  primaryButton?: {
    label: string;
  };
  secondaryButton?: {
    label: string;
  };
  rightImage?: string;
}

const { title, description, primaryButton, secondaryButton, rightImage } = Astro.props;
---

<section class="mb-20" data-hero-banner>
  <div class={`grid ${rightImage ? 'lg:grid-cols-2' : ''} gap-12 items-center`}>
    <!-- Left side content -->
    <div class={rightImage ? 'lg:pr-8' : ''}>
      <h1 set:html={title}></h1>
      <p class="text-xl text-secondary mb-8 max-w-2xl">
        {description}
      </p>
      {(primaryButton || secondaryButton) && (
        <div class="flex gap-4">
          {primaryButton && (
            <Button variant="primary" label={primaryButton.label} dataAttr="hero-primary" />
          )}
          {secondaryButton && (
            <Button variant="secondary" label={secondaryButton.label} dataAttr="hero-secondary" />
          )}
        </div>
      )}
    </div>
    
    <!-- Right side image (optional) -->
    {rightImage && (
      <div class="hidden lg:flex items-center">
        <img src={rightImage} alt="Hero banner illustration" class="w-full h-auto scale-110" />
      </div>
    )}
  </div>
</section>

<script>
  const heroSection = document.querySelector('[data-hero-banner]');
  if (heroSection) {
    heroSection.addEventListener('buttonClick', (event) => {
      const { dataAttr } = (event as CustomEvent).detail;
      if (dataAttr === 'hero-primary') {
        heroSection.dispatchEvent(new CustomEvent('primaryClick', { bubbles: true }));
      } else if (dataAttr === 'hero-secondary') {
        heroSection.dispatchEvent(new CustomEvent('secondaryClick', { bubbles: true }));
      }
    });
  }
</script>